LEX = flex
LEXFLAGS += --header-file=scanner.h

# Flags passed to the preprocessor.
CPPFLAGS += -I$(GTEST_DIR)/include

# Flags passed to the C++ compiler.
CXXFLAGS += -g -Wall -Wextra

LDLIBS += -ll 
LDFLAGS =

EXECS = TestCompiler

# House-keeping build targets.

all : $(EXECS)

clean :
	rm -f $(EXECS) *.o scanner.c parser.c parser.h

%.c : %.l
	$(LEX) $(LEXFLAGS) -o $@ $<

%.c : %.y
	$(BISON) $(BISONFLAGS) -o $@ $<

scanner.h : scanner.c

parser.h : parser.c

parser.o : parser.c node.h

scanner.o : scanner.c parser.h node.h

TestCompiler: scanner.o 
	$(CC) -o $@ $(LDLIBS) $^ $(LDFLAGS)
